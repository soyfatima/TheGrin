<app-navbar></app-navbar>
<div class="py-4 mb-5"></div>
<div class="messaging-container container-fluid">
  <div class="messages">
    <div class="chat">
      <div *ngFor="let message of messages">

        <!-- Message from the sender -->
        <div *ngIf="message.sender.id === loggedInUserId" class="bg-sender rounded-3 p-2 mb-3 w-75">
          <div class="d-flex justify-content-start">
           
            <div class="d-flex mb-3 flex0-column flex-sm-row align-items-start">
              <div class="circle-icon mb-3 mb-sm-0 d-flex bg-white justify-content-center align-items-center">
                <img [src]="message.senderProfileImageUrl" alt="Sender" class="img-fluid rounded-circle">
              </div>
              <div class="info ms-sm-4 color-default" style="padding: 3px;">
                <p class="mb-0"><strong>{{ message.sender.username }}</strong></p>
                <time datetime="">{{ message.createdAt | date: 'yyyy-MM-dd HH:mm' }}</time>
              </div>
            </div>

          </div>
            <div class="message-content d-flex justify-content-end text-white">
              <p>{{ message.content }}</p>
            </div>
        </div>

        <!-- Message from the recipient -->
        <div class="d-flex justify-content-end">
          <div *ngIf="message.recipient.id === loggedInUserId"
            class="mb-3 p-2 bg-recipient rounded-3 border border-0 w-75">
            <div class="d-flex justify-content-end mb-3">
             
              <div class="d-flex mb-3 flex0-column flex-sm-row align-items-start">
                <div class="info me-1 color-default" style="padding: 3px;">
                  <p class="mb-0"><strong>{{ message.sender.username }}</strong></p>
                  <time>{{ message.createdAt | date: 'yyyy-MM-dd HH:mm' }}</time>
                </div>
                <div class="circle-icon mb-3 mb-sm-0 d-flex bg-white justify-content-center align-items-center">
                  <img [src]="message.recipientProfileImageUrl" alt="Recipient" class="img-fluid rounded-circle">
                </div>
              </div>

            </div>
              <div class="message-content d-flex justify-content-start text-white">
                <p>{{ message.content }}</p>
              </div>

          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="py-5 mt-5 mb-4"></div>
  <div class="w-100 fixed-bottom bg-color">
    <textarea class="form-control mb-2" [(ngModel)]="content" rows="3" placeholder="votre message ici ..."></textarea>
    <div class="d-flex justify-content-end p-1">
      <button class="bg-color-primary p-1 border border-0 text-white rounded-2" (click)="sendMessage()"
        [disabled]="isSending">Envoyer</button>
    </div>
  </div>
</div>